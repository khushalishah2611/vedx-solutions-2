generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

/// ----------------------------------------------------------
/// ENUMS
/// ----------------------------------------------------------
enum BannerType {
  HOME
  ABOUT
  BLOGS
  CONTACT
  CAREER
}

enum AdminRole {
  SUPER_ADMIN
  EDITOR
  ANALYST
}

enum AdminStatus {
  ACTIVE
  SUSPENDED
}

enum PublishStatus {
  DRAFT
  REVIEW
  PUBLISHED
}

enum EmploymentType {
  FULL_TIME
  PART_TIME
  CONTRACT
  INTERN
}

/// ----------------------------------------------------------
/// DASHBOARD BANNER
/// ----------------------------------------------------------
model Banner {
  id        Int @id @default(autoincrement())
  title     String
  type      BannerType
  /// Non-home banners (about/blogs/contact/career) ek image
  imageUrl  String?
  /// Home banner mate multiple images
  images    BannerImage[]

  createdAt DateTime      @default(now())
  updatedAt DateTime      @updatedAt
}

model BannerImage {
  id        Int @id @default(autoincrement())
  bannerId  Int
  banner    Banner   @relation(fields: [bannerId], references: [id])

  imageUrl  String
  sortOrder Int      @default(0)

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

/// ----------------------------------------------------------
/// PROCESS TAB (steps)
/// ----------------------------------------------------------
model ProcessStep {
  id          Int @id @default(autoincrement())
  title       String
  description String?
  imageUrl    String?

  sortOrder   Int      @default(0)
  isActive    Boolean  @default(true)

  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
}

/// ----------------------------------------------------------
/// OUR SERVICES – SLIDERS + SERVICE CARDS
/// ----------------------------------------------------------
/// Slider = hero section (title + description + image)
model ServiceSlider {
  id                Int @id @default(autoincrement())
  sliderTitle       String
  sliderDescription String?
  sliderImageUrl    String?

  services          ServiceCard[]

  isActive          Boolean       @default(true)
  createdAt         DateTime      @default(now())
  updatedAt         DateTime      @updatedAt
}

/// Individual service cards, mapped to a slider
model ServiceCard {
  id           Int @id @default(autoincrement())
  title        String
  /// Optional, future ma use kari shakay
  subtitle     String?
  description  String?
  imageUrl     String?

  sliderId     Int
  slider       ServiceSlider @relation(fields: [sliderId], references: [id])

  sortOrder    Int           @default(0)
  isFeatured   Boolean       @default(false)

  createdAt    DateTime      @default(now())
  updatedAt    DateTime      @updatedAt
}

/// ----------------------------------------------------------
/// INDUSTRIES WE SERVE
/// ----------------------------------------------------------
/// Header (Title + Description) – singleton type section
model IndustriesConfig {
  id          Int @id @default(autoincrement())
  title       String
  description String?

  items       Industry[]

  createdAt   DateTime   @default(now())
  updatedAt   DateTime   @updatedAt
}

/// List items (Fintech, Healthtech, etc.)
model Industry {
  id          Int @id @default(autoincrement())
  sectionId   Int
  section     IndustriesConfig @relation(fields: [sectionId], references: [id])

  title       String
  description String?
  imageUrl    String?

  sortOrder   Int        @default(0)
  isActive    Boolean    @default(true)

  createdAt   DateTime   @default(now())
  updatedAt   DateTime   @updatedAt

  /// Optional: avoid exact same title duplicate per section
  @@unique([sectionId, title])
}

/// ----------------------------------------------------------
/// TECH SOLUTIONS FOR ALL BUSINESS TYPES
/// ----------------------------------------------------------
/// Header content
model TechSolutionsConfig {
  id          Int @id @default(autoincrement())
  title       String
  description String?

  solutions   TechSolution[]

  createdAt   DateTime       @default(now())
  updatedAt   DateTime       @updatedAt
}

/// Solutions list (SMB accelerators, Enterprise modernization)
model TechSolution {
  id          Int @id @default(autoincrement())
  sectionId   Int
  section     TechSolutionsConfig @relation(fields: [sectionId], references: [id])

  title       String
  description String?

  sortOrder   Int          @default(0)
  isActive    Boolean      @default(true)

  createdAt   DateTime     @default(now())
  updatedAt   DateTime     @updatedAt
}

/// ----------------------------------------------------------
/// EXPERTISE MODELS
/// ----------------------------------------------------------
model ExpertiseConfig {
  id          Int @id @default(autoincrement())
  title       String
  description String?

  items       ExpertiseItem[]

  createdAt   DateTime       @default(now())
  updatedAt   DateTime       @updatedAt
}

model ExpertiseItem {
  id          Int @id @default(autoincrement())
  sectionId   Int
  section     ExpertiseConfig @relation(fields: [sectionId], references: [id])

  title       String
  description String?
  imageUrl    String?

  sortOrder   Int        @default(0)
  isActive    Boolean    @default(true)

  createdAt   DateTime   @default(now())
  updatedAt   DateTime   @updatedAt
}

/// ----------------------------------------------------------
/// EXISTING MODELS (Admin, Navigation, Services, Blog, Career, etc.)
/// ----------------------------------------------------------

model AdminUser {
  id           Int @id @default(autoincrement())
  email        String        @unique
  passwordHash String
  name         String
  role         AdminRole     @default(EDITOR)
  status       AdminStatus   @default(ACTIVE)
  sessions     AdminSession[]
  createdAt    DateTime      @default(now())
  updatedAt    DateTime      @updatedAt
}

model AdminSession {
  id        Int @id @default(autoincrement())
  token     String     @unique
  adminId   Int
  admin     AdminUser  @relation(fields: [adminId], references: [id])
  expiresAt DateTime
  createdAt DateTime   @default(now())
}

model NavigationItem {
  id        Int @id @default(autoincrement())
  label     String
  path      String
  slug      String              @unique
  visible   Boolean             @default(true)
  order     Int                 @default(0)
  parentId  Int?
  parent    NavigationItem?     @relation("NavigationHierarchy", fields: [parentId], references: [id], onDelete: NoAction, onUpdate: NoAction)
  children  NavigationItem[]    @relation("NavigationHierarchy")
  seo       PageSeo?
}

model PageSeo {
  id              Int @id @default(autoincrement())
  pageKey         String           @unique
  metaTitle       String
  metaDescription String?
  keywords        String?
  ogImage         String?
  canonicalUrl    String?
  noIndex         Boolean          @default(false)

  navigationId    Int?          @unique
  navigation      NavigationItem?  @relation(fields: [navigationId], references: [id], onDelete: NoAction, onUpdate: NoAction)

  createdAt       DateTime         @default(now())
  updatedAt       DateTime         @updatedAt
}

model ServiceCategory {
  id            Int @id @default(autoincrement())
  name          String
  slug          String                @unique
  description   String?
  createdAt     DateTime?             @default(now())
  updatedAt     DateTime              @updatedAt
  subCategories ServiceSubCategory[]
}

model Service {
  id            Int @id @default(autoincrement())
  title         String
  slug          String              @unique
  summary       String?
  imageUrl      String?
  tags          Json?
  subCategoryId Int?
  subCategory   ServiceSubCategory? @relation(fields: [subCategoryId], references: [id])
  createdAt     DateTime            @default(now())
  updatedAt     DateTime            @updatedAt
}

model ServiceSubCategory {
  id           Int @id @default(autoincrement())
  name         String
  slug         String          @unique
  description  String?
  categoryId   Int
  category     ServiceCategory @relation(fields: [categoryId], references: [id])
  createdAt    DateTime        @default(now())
  updatedAt    DateTime        @updatedAt
  services     Service[]
}

model BlogPost {
  id           Int @id @default(autoincrement())
  title        String
  slug         String        @unique
  summary      String?
  content      String
  coverImage   String?
  author       String?
  status       PublishStatus @default(DRAFT)
  publishedAt  DateTime?
  tags         Json?
  createdAt    DateTime      @default(now())
  updatedAt    DateTime      @updatedAt

  categoryId   Int?
  category     BlogCategory? @relation(fields: [categoryId], references: [id])
}

model BlogCategory {
  id        Int @id @default(autoincrement())
  name      String     @unique
  createdAt DateTime   @default(now())
  updatedAt DateTime   @updatedAt
  posts     BlogPost[]
}

model CareerOpening {
  id               Int @id @default(autoincrement())
  title            String
  slug             String         @unique
  position         String?
  location         String?
  department       String?
  experience       String?
  employmentType   EmploymentType @default(FULL_TIME)
  postedOn         DateTime?      @default(now())
  imageUrl         String?
  description      String?
  requirements     Json?
  isRemoteFriendly Boolean        @default(true)
  isOpen           Boolean        @default(true)
  applications     CareerApplication[]
  createdAt        DateTime       @default(now())
  updatedAt        DateTime       @updatedAt
}

model CareerApplication {
  id             Int @id @default(autoincrement())
  name           String
  email          String
  contact        String?
  experience     String?
  employmentType EmploymentType @default(FULL_TIME)
  appliedOn      DateTime?      @default(now())
  resumeUrl      String?
  notes          String?
  jobId          Int?
  job            CareerOpening? @relation(fields: [jobId], references: [id])
  createdAt      DateTime       @default(now())
  updatedAt      DateTime       @updatedAt
}

model ContactMessage {
  id          Int @id @default(autoincrement())
  name        String
  email       String
  phone       String?
  countryCode String?
  contactType String?
  projectType String?
  description String?
  subject     String?
  message     String?
  status      String   @default("New")
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
}

model ProjectType {
  id        Int @id @default(autoincrement())
  name      String   @unique
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model ClientFeedback {
  id        Int @id @default(autoincrement())
  client    String
  role      String?
  quote     String
  highlight String?
  rating    Int?
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

/// NOTE: HireCategory / HireRole already exists for "Hire developers" flows.
/// (Mara pela Int-based HireCategory/HireSubcategory models hata – e hataavi didha.)
model HireCategory {
  id          Int @id @default(autoincrement())
  title       String
  slug        String     @unique
  description String?
  roles       HireRole[]
  createdAt   DateTime   @default(now())
  updatedAt   DateTime   @updatedAt
}

model HireRole {
  id             Int @id @default(autoincrement())
  title          String
  slug           String       @unique
  description    String?
  hireCategoryId Int
  hireCategory   HireCategory @relation(fields: [hireCategoryId], references: [id])
  createdAt      DateTime     @default(now())
  updatedAt      DateTime     @updatedAt
}

model OtpVerification {
  id          Int @id @default(autoincrement())
  email       String
  code        String
  expiresAt   DateTime
  verifiedAt  DateTime?
  createdAt   DateTime   @default(now())
  updatedAt   DateTime   @updatedAt

  @@index([email])
}

model ServiceMenu {
  id              Int @id @default(autoincrement())
  category        String
  bannerTitle     String
  bannerSubtitle  String
  bannerImage     String
  totalServices   Int                       @default(0)
  totalProjects   Int                       @default(0)
  totalClients    Int                       @default(0)
  description     String?

  subcategories   ServiceMenuSubcategory[]
  faqs            ServiceMenuFaq[]
  processes       ServiceProcess[]          // <-- back relation added

  createdAt       DateTime                  @default(now())
  updatedAt       DateTime                  @updatedAt

  @@index([category])
}

model ServiceMenuSubcategory {
  id          Int @id @default(autoincrement())
  name        String
  serviceId   Int
  service     ServiceMenu   @relation(fields: [serviceId], references: [id])

  createdAt   DateTime      @default(now())
  updatedAt   DateTime      @updatedAt

  @@index([serviceId])
}

model ServiceMenuFaq {
  id          Int @id @default(autoincrement())
  question    String
  answer      String
  serviceId   Int
  service     ServiceMenu   @relation(fields: [serviceId], references: [id])

  createdAt   DateTime      @default(now())
  updatedAt   DateTime      @updatedAt

  @@index([serviceId])
}

/// ===============================================
/// TECHNOLOGIES WE SUPPORT
/// ===============================================

model Technology {
  id            Int @id @default(autoincrement())
  category      String
  subcategory   String?
  title         String
  image         String
  items         String[]  // Array of technology names

  createdAt     DateTime  @default(now())
  updatedAt     DateTime  @updatedAt

  @@index([category, subcategory])
}

/// ===============================================
/// BENEFITS
/// ===============================================

model Benefit {
  id            Int @id @default(autoincrement())
  title         String
  category      String?
  subcategory   String?
  description   String
  image         String

  createdAt     DateTime  @default(now())
  updatedAt     DateTime  @updatedAt

  @@index([category, subcategory])
}

/// ===============================================
/// PER-SERVICE PROCESS STEPS
/// ===============================================

model ServiceProcess {
  id            Int @id @default(autoincrement())
  title         String
  description   String
  category      String
  subcategory   String?
  image         String
  serviceId     Int?
  service       ServiceMenu?  @relation(fields: [serviceId], references: [id])

  createdAt     DateTime      @default(now())
  updatedAt     DateTime      @updatedAt

  @@index([category, subcategory])
  @@index([serviceId])
}

/// ===============================================
/// HIRE DEVELOPERS (Landing section)
/// ===============================================

model HireDeveloper {
  id              Int @id @default(autoincrement())
  title           String
  description     String
  heroImage       String

  services        HireService[]

  createdAt       DateTime      @default(now())
  updatedAt       DateTime      @updatedAt
}

model HireService {
  id                Int @id @default(autoincrement())
  category          String
  subcategory       String?
  title             String
  description       String
  image             String
  hireDeveloperId   Int?
  hireDeveloper     HireDeveloper? @relation(fields: [hireDeveloperId], references: [id])

  createdAt         DateTime       @default(now())
  updatedAt         DateTime       @updatedAt

  @@index([category, subcategory])
  @@index([hireDeveloperId])
}

/// ===============================================
/// WHY CHOOSE THIS SERVICE
/// ===============================================

model WhyChoose {
  id                Int @id @default(autoincrement())
  heroTitle         String
  heroDescription   String
  heroImage         String
  tableTitle        String
  tableDescription  String

  services          WhyService[]

  createdAt         DateTime     @default(now())
  updatedAt         DateTime     @updatedAt
}

model WhyService {
  id            Int @id @default(autoincrement())
  category      String
  subcategory   String?
  title         String
  description   String
  whyChooseId   Int?
  whyChoose     WhyChoose?  @relation(fields: [whyChooseId], references: [id])

  createdAt     DateTime    @default(now())
  updatedAt     DateTime    @updatedAt

  @@index([category, subcategory])
  @@index([whyChooseId])
}

/// ===============================================
/// WHY VEDX SOLUTIONS
/// ===============================================

model WhyVedx {
  id              Int @id @default(autoincrement())
  heroTitle       String
  heroDescription String
  heroImage       String

  reasons         WhyVedxReason[]

  createdAt       DateTime      @default(now())
  updatedAt       DateTime      @updatedAt
}

model WhyVedxReason {
  id            Int @id @default(autoincrement())
  title         String
  description   String
  image         String
  whyVedxId     Int?
  whyVedx       WhyVedx?   @relation(fields: [whyVedxId], references: [id])

  createdAt     DateTime   @default(now())
  updatedAt     DateTime   @updatedAt

  @@index([whyVedxId])
}

/// ===============================================
/// HIRE DEVELOPER – NEW TABLES (Mongo style)
/// ===============================================

model HireDeveloperService {
  id              Int @id @default(autoincrement())
  category        String
  subcategories   Json     // Array of {name: string}
  bannerTitle     String?
  bannerSubtitle  String?
  bannerImage     String?
  totalServices   Int      @default(0)
  totalProjects   Int      @default(0)
  totalClients    Int      @default(0)
  description     String?  // removed @db.Text
  faqs            Json?    // Array of {id: string, question: string, answer: string}
  createdAt       DateTime @default(now())
  updatedAt       DateTime @updatedAt

  @@map("hire_developer_services")
}

// Technologies Table
model HireDeveloperTechnology {
  id           Int @id @default(autoincrement())
  category     String
  subcategory  String?
  title        String
  image        String
  items        Json     // Array of strings (technology names)
  createdAt    DateTime @default(now())
  updatedAt    DateTime @updatedAt

  @@map("hire_developer_technologies")
}

// Benefits Table
model HireDeveloperBenefit {
  id          Int @id @default(autoincrement())
  title       String
  category    String?
  subcategory String?
  description String?  // removed @db.Text
  image       String
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  @@map("hire_developer_benefits")
}

// Hire Pricing Table
model HireDeveloperPricing {
  id             Int @id @default(autoincrement())
  title          String
  subtitle       String?
  description    String?  // removed @db.Text
  price          String
  services       Json?    // Array of strings (service inclusions)
  heroTitle      String?
  heroDescription String? // removed @db.Text
  heroImage      String?
  createdAt      DateTime @default(now())
  updatedAt      DateTime @updatedAt

  @@map("hire_developer_pricing")
}

// Hire Services (Development Services) Table
model HireDeveloperHireService {
  id          Int @id @default(autoincrement())
  category    String
  subcategory String?
  title       String
  description String?  // removed @db.Text
  image       String
  heroTitle   String?
  heroDescription String? // removed @db.Text
  heroImage   String?
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  @@map("hire_developer_hire_services")
}

// Process Table
model HireDeveloperProcess {
  id          Int @id @default(autoincrement())
  title       String
  description String?  // removed @db.Text
  category    String
  subcategory String
  image       String
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  @@map("hire_developer_process")
}

// Why VedX Table
model HireDeveloperWhyVedx {
  id              Int @id @default(autoincrement())
  title           String
  description     String?  // removed @db.Text
  image           String
  heroTitle       String?
  heroDescription String?  // removed @db.Text
  heroImage       String?
  createdAt       DateTime @default(now())
  updatedAt       DateTime @updatedAt

  @@map("hire_developer_why_vedx")
}

// Why Choose Service Table
model HireDeveloperWhyChoose {
  id              Int @id @default(autoincrement())
  category        String
  subcategory     String?
  title           String
  description     String?  // removed @db.Text
  heroTitle       String?
  heroDescription String?  // removed @db.Text
  heroImage       String?
  tableTitle      String?
  tableDescription String? // removed @db.Text
  createdAt       DateTime @default(now())
  updatedAt       DateTime @updatedAt

  @@map("hire_developer_why_choose")
}

// Industries Table
model HireDeveloperIndustry {
  id          Int @id @default(autoincrement())
  title       String
  description String?  // removed @db.Text
  image       String
  sectionTitle String?
  sectionDescription String? // removed @db.Text
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  @@map("hire_developer_industries")
}

// Tech Solutions Table
model HireDeveloperTechSolution {
  id               Int @id @default(autoincrement())
  title            String
  description      String?  // removed @db.Text
  sectionTitle     String?
  sectionDescription String? // removed @db.Text
  createdAt        DateTime @default(now())
  updatedAt        DateTime @updatedAt

  @@map("hire_developer_tech_solutions")
}

// Expertise Table
model HireDeveloperExpertise {
  id          Int @id @default(autoincrement())
  title       String
  description String?  // removed @db.Text
  image       String
  sectionTitle String?
  sectionDescription String? // removed @db.Text
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  @@map("hire_developer_expertise")
}

// Our Services Slider Table
model HireDeveloperOurService {
  id               Int @id @default(autoincrement())
  title            String
  image            String
  sliderTitle      String?
  sliderDescription String? // removed @db.Text
  sliderImage      String?
  createdAt        DateTime @default(now())
  updatedAt        DateTime @updatedAt

  @@map("hire_developer_our_services")
}
